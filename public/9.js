(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{324:function(t,e,s){"use strict";s.r(e);var a={data:function(){return{users:[],editMode:!1,form:new Form({id:"",name:"",email:"",password:"",type:"",bio:"",photo:""})}},methods:{loadUsers:function(){var t=this;this.$gate.isAdmin()&&(this.$Progress.start(),axios.get("api/user").then((function(e){t.users=e.data.data,t.$Progress.finish()}),(function(e){console.log(e),t.$Progress.fail()})))},createUser:function(){this.form.post("api/user").then((function(){$("#usersModal").modal("hide"),toast.fire({icon:"success",title:"User created successfully"}),Fire.$emit("refreshDataTable")})).catch((function(t){console.log("greska u dodavanju")}))},updateUser:function(){var t=this;this.$Progress.start(),this.form.put("api/user/".concat(this.form.id)).then((function(){$("#addNewModal").modal("hide"),toast.fire({icon:"success",title:"User updated successfully"}),Fire.$emit("refreshDataTable"),t.$Progress.finish()})).catch((function(e){t.$Progress.fail(),console.log(e)}))},deleteUser:function(t){var e=this;swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(s){s.value&&e.form.delete("api/user/".concat(t)).then((function(){swal.fire("Deleted!","Your file has been deleted.","success"),Fire.$emit("refreshDataTable")}))}))},openModalForCreate:function(){this.editMode=!1,this.form.reset(),$("#usersModal").modal("show")},openModalForEdit:function(t){this.editMode=!0,this.form.reset(),$("#usersModal").modal("show"),this.form.fill(t)}},created:function(){var t=this;this.loadUsers(),Fire.$on("refreshDataTable",(function(){t.loadUsers()}))}},o=s(1),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row",attrs:{id:"usersManagment"}},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h3",{staticClass:"card-title"},[t._v("Users Managment")]),t._v(" "),s("div",{staticClass:"card-tools"},[s("div",{staticClass:"input-group input-group-sm"},[s("button",{staticClass:"btn btn-success",on:{click:t.openModalForCreate}},[t._v("Add New "),s("i",{staticClass:"fas fa-user-plus"})])])])]),t._v(" "),s("div",{staticClass:"card-body table-responsive p-0"},[s("table",{staticClass:"table table-hover text-nowrap"},[t._m(0),t._v(" "),s("tbody",t._l(t.users,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.id))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.email))]),t._v(" "),s("td",[t._v(t._s(t._f("upperText")(e.type)))]),t._v(" "),s("td",[t._v(t._s(t._f("formatDate")(e.created_at))+"\n                        ")]),s("td",[s("button",{staticClass:"modify-btn",on:{click:function(s){return t.openModalForEdit(e)}}},[t._v("Edit "),s("i",{staticClass:"fa fa-edit"})]),t._v(" "),s("button",{staticClass:"modify-btn",on:{click:function(s){return t.deleteUser(e.id)}}},[t._v("Delete "),s("i",{staticClass:"fa fa-trash"})])])])})),0)])])])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"usersModal",tabindex:"-1",role:"dialog","aria-labelledby":"usersModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"usersModalLabel"}},[t._v("\n                        "+t._s(t.editMode?"Edit User":"Add New User")+"\n                    ")]),t._v(" "),t._m(1)]),t._v(" "),s("form",{on:{submit:function(e){e.preventDefault(),t.editMode?t.updateUser():t.createUser()}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",name:"name",placeholder:"Name"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"name"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"text",name:"email",placeholder:"Email Address"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"email"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.bio,expression:"form.bio"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("bio")},attrs:{name:"bio",id:"bio",placeholder:"Short bio for user (Optional)"},domProps:{value:t.form.bio},on:{input:function(e){e.target.composing||t.$set(t.form,"bio",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"bio"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("type")},attrs:{name:"type",id:"type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Select User Role")]),t._v(" "),s("option",{attrs:{value:"admin"}},[t._v("Admin")]),t._v(" "),s("option",{attrs:{value:"user"}},[t._v("Standard User")]),t._v(" "),s("option",{attrs:{value:"author"}},[t._v("Author")])]),t._v(" "),s("has-error",{attrs:{form:t.form,field:"type"}})],1),t._v(" "),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",name:"password",id:"password"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),s("has-error",{attrs:{form:t.form,field:"password"}})],1)]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"btn",class:[t.editMode?"btn-success":"btn-primary"],attrs:{type:"submit"}},[t._v("\n                            "+t._s(t.editMode?"Edit":"Create")+"\n                        ")])])])])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("ID")]),t._v(" "),s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Email")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Modify")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])}],!1,null,null,null);e.default=r.exports}}]);